{% extends "base.html" %}
{% block title %}ประวัติการจอง{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mt-8 bg-white rounded-2xl shadow p-6">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-lg font-semibold">ประวัติการจองของฉัน</h1>
  </div>

  {% if bookings %}
  <table class="w-full text-sm">
    <thead class="border-b text-left text-slate-500">
      <tr>
        <th class="py-2">วันที่</th>
        <th class="py-2">โต๊ะ</th>
        <th class="py-2">เวลา</th>
        <th class="py-2">สถานะ</th>
        <th class="py-2 text-right">การจัดการ</th>
      </tr>
    </thead>
    <tbody>
      {% for b in bookings %}
      <tr class="border-b last:border-0">
        <td class="py-2">{{ b.booking_date }}</td>
        <td class="py-2">{{ b.table.table_name }}</td>
        <td class="py-2">
          {{ b.timeslot.start_time|time:"H:i" }} - {{ b.timeslot.end_time|time:"H:i" }}
        </td>
        <td class="py-2">
          {% if b.status == "Cancelled" %}
          <span class="text-xs px-2 py-1 rounded-full bg-red-100 text-red-700">
            ยกเลิกแล้ว
          </span>
          {% else %}
          <span class="text-xs px-2 py-1 rounded-full bg-emerald-100 text-emerald-700">
            {{ b.status }}
          </span>
          {% endif %}
        </td>
        <td class="py-2 text-right">
          {% if b.status != "Cancelled" %}
          <a href="{% url 'cancel_booking' b.id %}"
             class="text-xs px-3 py-1 rounded-full bg-red-100 text-red-700 hover:bg-red-200">
            ยกเลิกการจอง
          </a>
          {% else %}
          <span class="text-xs text-slate-400">–</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="text-sm text-slate-500">ยังไม่มีประวัติการจอง</p>
  {% endif %}
</div>
{% endblock %}
